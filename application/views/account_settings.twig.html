{% extends "layout/main.twig.html" %}
{% block content %}
	{% if alert_message != null %}
	<div class="alert alert-success alert-dismissable">
                                        <i class="fa fa-check"></i>
                                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
                                        <b>Success!</b> {{ alert_message }}.
    </div>
    {% endif %}
	<div class="col-md-6">
		<div class="box box-primary">
                                <div class="box-header">
                                    <h3 class="box-title">Account Settings</h3>
                                </div><!-- /.box-header -->
                                <!-- form start -->
                                <form role="form" method="post">
                                    <div class="box-body">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1"> Username/Email</label>
                                            <input required type="text" name="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email" value="{{ user_account.email }}">
                                        </div>
                                       <div class="form-group">
                                       		<button data-toggle="modal" data-target="#changePassword" class="btn btn-primary">Change Password
                                       		</button>
                                       </div>
                                    </div><!-- /.box-body -->

                                </form>
                            </div>
	</div>



 <form role="form" id="change_password" action="/auth/changepassword" method="post">

	 <div class="modal fade" id="changePassword" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	        <h4 class="modal-title" id="myModalLabel">Change Password</h4>
	      </div>
	      <div class="modal-body">
	              <input type="hidden" name="id" id="update-department-id">
	               <div id="current_p" class="form-group">
	                <label for="exampleInputEmail1">Current Password</label>
	                <input type="password" name="current_password" class="form-control" id="update-department-name" >
	            </div>
	            <div id="new_p" class="form-group">
	                <label for="exampleInputEmail1">New Password</label>
	                <input type="password" name="new_password" class="form-control" id="new_password" >
	            </div>
	            <div id="confirm_p" class="form-group">
	                <label class="control-label" for="exampleInputEmail1">Confirm New Password</label>
	                <input type="password" name="confirm_password" class="form-control" id="confirm_password" >
	                
	            </div>	            
	            

	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	        <input type="submit" class="btn btn-primary" value="Save">
	      </div>
	    </div>
	  </div>
	</div>
	                               
	</div>                               
</form>


{% endblock %}


{% block scripts %}
	<script type="text/javascript">
		$("#change_password").on('submit', function (e){
			var np = $("#new_password").val();
			var cp = $("#confirm_password").val();

			if(np != cp || np == ""){
				e.preventDefault();
				alert('Please Confirm New Password');

			}
		});

		$("#confirm_password").on('keyup', function(){
				var np = $("#new_password").val();
			var cp = $("#confirm_password").val();

			if(np != cp || np == ""){
				$(this).addClass('has-danger');

			}
			else{
				$(this).addClass('has-success');
			}
		});

	</script>
{% endblock %}