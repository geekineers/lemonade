{% extends "layout/main.twig.html" %}
{% block content %}
<div class="row">
	<div class="col-sm-8">
		<form action="/settings/forms" method="post">
			<div class="col-sm-12 panel">
				<div class="form-group">
					<label>Name: </label>
					<input type="text" class="form-control" name="form-name">
				</div>
			</div>
			<div id="form-container" class="col-sm-12 panel">

			</div>
			<textarea id="form-content" name="form-content"></textarea>
			<div class="col-sm-12">
				<button class="btn btn-success pull-right">Save</button>
			</div>
		</form>
		<div class="hide" id="form-tpl">
			<div id="tpl-single-line-text">
				<div class="form-group form-item">
					<label>Label</label>
					<input type="text" class="form-control"  placeholder="Input Value">
				</div>
			</div>

			<div id="tpl-number">
				<div class="form-group form-item">
					<label>Label</label>
					<input type="number" class="form-control"  placeholder="0">
				</div>
			</div>

			<div id="tpl-paragraph-text">
				<div class="form-group">
					<label>Textarea</label>
					<textarea class="form-control"
						rows="3" placeholder="Enter ..."></textarea>
				</div>
			</div>

			<div id="tpl-checkbox">
				<div class="form-group">
					<label>Checkbox</label>
	                <div class="checkbox">
	                    <label class="">
	                        <input type="checkbox">
	                        Checkbox 1
	                    </label>
	                </div>
	            </div>
			</div>

			<div id="tpl-radio">
				<div class="form-group">
					<label>Radio</label>
					<div class="radio">
						<label class="">
							<input type="radio" name="radio">
							Radio 1
						</label>
					</div>
					<div class="radio">
						<label class="">
							<input type="radio" name="radio">
							Radio 1
						</label>
					</div>
				</div>
			</div>

			<div id="tpl-dropdown">
				<div class="form-group">
	                <label>Select Disabled</label>
	                <select class="form-control" disabled="">
	                    <option>option 1</option>
	                    <option>option 2</option>
	                    <option>option 3</option>
	                    <option>option 4</option>
	                    <option>option 5</option>
	                </select>
	            </div>
			</div>

			<div id="tpl-date">
				<div class="form-group">
                    <label>Date</label>
                    <div class="input-group">
                        <div class="input-group-addon"><i class="fa fa-calendar"></i></div><input type="text" class="form-control focus.inputmask" data-inputmask=" 'alias': 'dd/mm/yyyy'" data-mask="">
                    </div>
                </div>
			</div>

			<div id="tpl-datetime">
				<div class="form-group">
                    <label>Date</label>
                    <div class="input-group">
                        <div class="input-group-addon"><i class="fa fa-calendar"></i></div><input type="text" class="form-control focus.inputmask" data-inputmask="'alias': 'datetime'" data-mask="">
                    </div>
                </div>
			</div>

			<div id="tpl-section-break">
				<div class="form-grourp">
					<label>Section Break</label>
					<hr/>
				</div>
			</div>

		</div>

	</div>
	<div class="col-sm-4 hidden item-setting">
		<div id="form-tools " class="row">
			<div class="col-sm-12">
				<label>Name</label>
				<input type="text" class="name form-control"></input>
				<label>Placeholder</label>
				<input class=" placeholder form-control"></input>
				<br>
				<div class="form-group">
					<button class="btn btn-success save-setting">Save</button>
				</div>
			</div>
		
		</div>
	</div>
	<div class="col-sm-4">
		<div id="form-tools" class="row">
			<div class="col-sm-6">
				<button class="btn btn-block insert-form-field"
					data-tpl="inputText">Single Line Text</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="textarea">Paragraph Text</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="radio">Radio</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="dateTime">Datetime</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="sectionBreak">Section Break</button>
			</div>
			<div class="col-sm-6">
				<button class="btn btn-block insert-form-field"
					data-tpl="inputNumber">Number</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="checkBox">Checkboxes</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="dropdown">Dropdown</button>
				<button class="btn btn-block insert-form-field"
					data-tpl="date">Date</button>
			</div>
		</div>
	</div>
</div>




<div class="modal fade" id="rc-settings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="modal-label"></h4>
      </div>
      <div class="modal-body">
      	<a href="#" class="add-values">Add Values</a>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/js/plugins/input-mask/jquery.inputmask.js" type="text/javascript"></script>
<script src="/js/plugins/input-mask/jquery.inputmask.date.extensions.js" type="text/javascript"></script>
<script src="/js/plugins/input-mask/jquery.inputmask.extensions.js" type="text/javascript"></script>
<script>
(function($, window, document, undefined) {

	var formUI = {
		'inputText' : '<input type="text" class="form-control" name="form-name">',
		'textarea' : '<textarea class="form-control" rows="3" placeholder="Enter ..."></textarea>',
		'inputNumber' :'<input type="number" class="form-control"  placeholder="0">',
		'radio' : '<input type="radio" name="radio">',
		'dateTime' : '<div class="input-group"><div class="input-group-addon"><i class="fa fa-calendar"></i></div><input type="text" class="form-control focus.inputmask" data-inputmask="\'alias\': \'datetime\'" data-mask=""></div>',
		'sectionBreak' :'<hr/>',
		'checkBox' : '<input type="checkbox">',
		'dropdown' : '<select class="form-control" disabled=""></select>', 
		'date' : '<div class="input-group"><div class="input-group-addon"><i class="fa fa-calendar"></i></div><input type="text" class="form-control focus.inputmask" data-inputmask="\'alias\': \'dd/mm/yyyy\'" data-mask=""></div>'
	}



	var container = $('#form-container');
	var content = $('#form-content');
	var wrapper = '</div>';
	window.jsonForm = {};
	var activeData = '';

	var currentValues = {};
	$('#form-tools button.insert-form-field').on('click', function() {
	$('#rc-settings .modal-body').find('.add-values').on('click',function(){
		$(this).parent().prepend('<input type="text" class="form-control" name="values[]"> <br>');
	});

		var tpl = $(this).data('tpl');
		// var field = $('#'+tpl).html();
		$('#form-tools button.insert-form-field')
		container.append('<div class="form-group form-item '+tpl+'"> <a href="#" class="add_detail pull-right" data-tpl="'+tpl+'" >item settings</a><br>'+ formUI[tpl] +'</div>');
		window.jsonForm[tpl] = tpl;

		if(tpl == 'radio' || tpl == 'checkBox') {
			if(tpl  == 'radio'){
				$('#rc-settings').modal('show').find('.modal-title').text(tpl);
			}else if(tpl  == 'radio'){

			}

			$("input[type='checkbox']:not(.simple), input[type='radio']:not(.simple)").iCheck({
		    
		        radioClass: 'iradio_minimal'
		    });

		}else {
			container.append('<div class="form-group form-item '+tpl+'"> <a href="#" class="add_detail pull-right" data-tpl="'+tpl+'" >item settings</a><br>'+ formUI[tpl] +'</div>');
		}
		if(tpl == 'date' || tpl == 'dateTime') {
			$('.'+tpl).find("input").inputmask();
		} 
		$('.add_detail').unbind('click').on('click',function(){



			var template = $(this).data('tpl');
			activeData = template;


			$('.item-setting').removeClass('hidden');
			$('#form-tools').addClass('hidden');

			$('.save-setting').on('click',function(){
				var name = $('.name').val();
				var placeholder = $('.placeholder').val();

				window.jsonForm[activeData] = {
					'label' : name,
					'type'  : activeData,
					'placeholder' : placeholder
				}

				$('.item-setting').addClass('hidden');
				$('.'+activeData).prepend('<label>'+name+'</label>');
				$('.'+activeData).find('input,textarea').attr('placeholder',placeholder);
				$('#form-tools').removeClass('hidden');

				$(this).unbind('click');
			});
		});
	});
})(jQuery, window, document);
</script>
{% endblock %}
